name: full_dict_embeddings
description: full_dict_embeddings - custom configuration
nodes:
- id: l1
  processor: l1_gliner
  inputs:
    texts:
      source: $input
      fields: texts
  output:
    key: l1_result
  config:
    model: knowledgator/gliner-bi-base-v2.0
    labels:
    - gene
    - protein
    - disease
    token: null
    device: cpu
    threshold: 0.3
    flat_ner: true
    multi_label: false
    batch_size: 16
    max_right_context: 50
    max_left_context: 50
    min_entity_length: 2
    use_precomputed_embeddings: false
    max_length: 512
- id: l2
  processor: l2_chain
  requires:
  - l1
  inputs:
    mentions:
      source: l1_result
      fields: entities
  output:
    key: l2_result
  schema:
    template: '{label}: {description}'
  config:
    max_candidates: 10
    min_popularity: 0
    layers:
    - type: dict
      priority: 0
      write: true
      search_mode:
      - exact
      - fuzzy
      ttl: 0
      cache_policy: always
      field_mapping:
        entity_id: entity_id
        label: label
        aliases: aliases
        description: description
        entity_type: entity_type
        popularity: popularity
        embedding: embedding
        embedding_model_id: embedding_model_id
      fuzzy:
        max_distance: 100
        min_similarity: 0.5
    embeddings:
      enabled: true
      model_name: knowledgator/gliner-linker-large-v1.0
      dim: 768
      precompute_on_load: false
- id: l3
  processor: l3_batch
  requires:
  - l2
  inputs:
    texts:
      source: $input
      fields: texts
    candidates:
      source: l2_result
      fields: candidates
  output:
    key: l3_result
  schema:
    template: '{label}: {description}'
  config:
    model_name: knowledgator/gliner-linker-large-v1.0
    huggingface_token: null
    device: cpu
    threshold: 0.5
    flat_ner: true
    multi_label: false
    batch_size: 1
    use_precomputed_embeddings: true
    cache_embeddings: true
    max_length: 512
- id: l0
  processor: l0_aggregator
  requires:
  - l1
  - l2
  - l3
  inputs:
    l1_entities:
      source: l1_result
      fields: entities
    l2_candidates:
      source: l2_result
      fields: candidates
    l3_entities:
      source: l3_result
      fields: entities
  output:
    key: l0_result
  config:
    min_confidence: 0.0
    include_unlinked: true
    return_all_candidates: true
    strict_matching: false
    position_tolerance: 2
  schema:
    template: '{label}: {description}'
