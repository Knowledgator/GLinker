pipeline:
  name: "Entity Linking Pipeline"
  
  steps:
    - processor: "l1_batch"
      config:
        model: "en_core_sci_sm"
        batch_size: 32
        min_entity_length: 2
      inputs:
        input_data: "l1_input"
      output: "l1_output"
    
    - processor: "l0_l1_to_l2"
      config:
        deduplicate_mentions: true
        min_mention_length: 2
      inputs:
        l1_output: "l1_output"
      output: "l2_input"
    
    - processor: "l2_postgres"
      config:
        database_type: "postgres"
        database_config:
          host: "localhost"
          port: 5432
          database: "entities_db"
          user: "postgres"
          password: "postgres"
        max_candidates: 5
        fuzzy_max_distance: 2
        use_fuzzy: true
      inputs:
        input_data: "l2_input"
      output: "l2_output"
    
    - processor: "l0_l2_to_l3"
      config:
        deduplicate_candidates: true
        flatten_per_text: true
      inputs:
        l2_output: "l2_output"
        texts: "texts"
        l1_output: "l1_output"
      output: "l3_input"
    
    - processor: "l3_batch"
      config:
        model_name: "knowledgator/gliner-bi-edge-v2.0"
        device: "cpu"
        threshold: 0.1
      inputs:
        input_data: "l3_input"
      output: "l3_output"